<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Ransomware File Scanner</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg1: #e6f0ff;
      --bg2: #f3e8ff;
      --glass: rgba(255,255,255,0.66);
      --muted: #6b7280;
      --accent: #2563eb;
      --green: #16a34a;
      --red: #ef4444;
      --card-shadow: 0 10px 30px rgba(20,20,50,0.08);
      --radius: 14px;
    }

    *{box-sizing:border-box;}
    body {
      margin:0;
      font-family:"Poppins", sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;justify-content:center;align-items:center;
      padding:28px;min-height:100vh;
    }

    .container {
      width:100%;max-width:1100px;
      display:grid;grid-template-columns:1fr 420px;
      gap:22px;
    }
    @media (max-width:900px){.container{grid-template-columns:1fr;}}

    .card {
      background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.8));
      border-radius:var(--radius);
      padding:20px;
      box-shadow:var(--card-shadow);
      backdrop-filter:blur(10px);
    }

    h1 {margin:0;font-weight:600;font-size:22px;}
    p {color:var(--muted);margin-top:4px;}

    .uploader {
      margin-top:16px;
      border:2px dashed rgba(0,0,0,0.08);
      padding:20px;
      border-radius:12px;
      display:flex;justify-content:space-between;align-items:center;
      background:rgba(255,255,255,0.8);
    }
    .btn {
      background:var(--accent);color:white;font-weight:600;
      border:none;border-radius:8px;padding:10px 14px;cursor:pointer;
    }
    .btn.secondary {
      background:transparent;color:var(--accent);border:1px solid var(--accent);
    }

    input[type=file]{display:none;}
    .status-badge {
      display:inline-block;padding:8px 12px;border-radius:999px;color:white;font-weight:700;
    }
    .status-safe{background:var(--green);}
    .status-unsafe{background:var(--red);}
    .status-unknown{background:#9ca3af;}

    .chart-wrap{width:220px;height:220px;margin:auto;}

    .history-item {
      background:white;border-radius:10px;padding:10px;
      display:flex;justify-content:space-between;align-items:center;
      box-shadow:0 2px 8px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Ransomware File Scanner</h1>
      <p>Upload any file to check for ransomware-like patterns. Works completely offline â€” no data leaves your device.</p>

      <div id="dropZone" class="uploader">
        <div>
          <p><strong>Drop file here</strong> or click Browse</p>
          <small style="color:var(--muted);">Supports .txt, .py, .js, and other text files.</small>
        </div>
        <div>
          <label class="btn" for="fileInput">Browse</label>
          <button class="btn secondary" id="btnScan">Scan</button>
          <input id="fileInput" type="file" />
        </div>
      </div>

      <div style="margin-top:16px;">
        <button class="btn secondary" id="downloadSafe">Download Safe File</button>
        <button class="btn secondary" id="downloadMal">Download Ransomware Sample</button>
      </div>

      <h3 style="margin-top:20px;">Scan History</h3>
      <div id="history" style="display:flex;flex-direction:column;gap:8px;"></div>
    </div>

    <div class="card">
      <div class="chart-wrap"><canvas id="chartCanvas" width="220" height="220"></canvas></div>
      <div style="text-align:center;margin-top:10px;">
        <div id="statusBadge" class="status-badge status-unknown">UNKNOWN</div>
        <p id="fileNameDisplay">No file scanned</p>
      </div>
      <div>
        <h3>Scan Details</h3>
        <div id="detectedInfo" style="font-size:14px;color:var(--muted)">No results yet.</div>
        <pre id="rawPreview" style="background:#f9fafb;border-radius:8px;padding:10px;min-height:100px;overflow:auto;font-size:12px;"></pre>
      </div>
    </div>
  </div>

<script>
(() => {
  const ransomKeywords = ["encrypt","decrypt","ransom","bitcoin","wallet","payment","key","locker","restore","decryptor"];
  const ransomAmountPattern = /\b(\$?\d+\s?(usd|bitcoin|btc)?)\b/i;

  const fileInput = document.getElementById('fileInput');
  const btnScan = document.getElementById('btnScan');
  const statusBadge = document.getElementById('statusBadge');
  const fileNameDisplay = document.getElementById('fileNameDisplay');
  const detectedInfo = document.getElementById('detectedInfo');
  const rawPreview = document.getElementById('rawPreview');
  const historyEl = document.getElementById('history');
  const downloadSafe = document.getElementById('downloadSafe');
  const downloadMal = document.getElementById('downloadMal');
  let currentFile = null;

  const ctx = document.getElementById('chartCanvas').getContext('2d');
  const chart = new Chart(ctx, {
    type:'doughnut',
    data:{labels:['Safe','Ransomware'],datasets:[{data:[1,0],backgroundColor:['#16a34a','#ef4444']}]},
    options:{cutout:'70%',plugins:{legend:{position:'bottom'}}}
  });

  fileInput.addEventListener('change', e=>{
    currentFile = e.target.files[0];
    if(currentFile) fileNameDisplay.textContent = currentFile.name;
  });

  btnScan.addEventListener('click', ()=>{
    if(!currentFile){alert('Please select a file first!');return;}
    const reader = new FileReader();
    reader.onload = e=>{
      const text = e.target.result.toLowerCase();
      const matches = ransomKeywords.filter(k=>text.includes(k));
      const amount = text.match(ransomAmountPattern);
      const isRansom = matches.length>2 || amount;
      updateUI(isRansom,matches,amount,text);
      saveHistory({name:currentFile.name,unsafe:isRansom,time:new Date().toLocaleString()});
    };
    reader.readAsText(currentFile);
  });

  function updateUI(isRansom,words,amount,text){
    if(isRansom){
      statusBadge.className = 'status-badge status-unsafe';
      statusBadge.textContent = 'RANSOMWARE';
      detectedInfo.innerHTML = `<strong>Detected keywords:</strong> ${words.join(', ')}<br>${amount?`<strong>Demand:</strong> ${amount[0]}`:''}`;
      chart.data.datasets[0].data=[0,1];
    } else {
      statusBadge.className = 'status-badge status-safe';
      statusBadge.textContent = 'SAFE';
      detectedInfo.textContent = 'No ransomware patterns detected.';
      chart.data.datasets[0].data=[1,0];
    }
    rawPreview.textContent = text.slice(0,400);
    chart.update();
  }

  function saveHistory(entry){
    const hist = JSON.parse(localStorage.getItem('ransomHistory')||'[]');
    hist.unshift(entry); if(hist.length>20) hist.pop();
    localStorage.setItem('ransomHistory',JSON.stringify(hist));
    renderHistory();
  }

  function renderHistory(){
    const hist = JSON.parse(localStorage.getItem('ransomHistory')||'[]');
    historyEl.innerHTML='';
    if(hist.length===0){historyEl.innerHTML='<p style="color:gray;">No scans yet.</p>';return;}
    hist.forEach(h=>{
      const el=document.createElement('div');
      el.className='history-item';
      el.innerHTML=`<div><strong>${h.name}</strong><br><small>${h.time}</small></div>
                    <div style="color:${h.unsafe?'#ef4444':'#16a34a'};font-weight:700;">${h.unsafe?'Ransomware':'Safe'}</div>`;
      historyEl.appendChild(el);
    });
  }

  renderHistory();

  downloadSafe.onclick=()=>{
    const safeData="print('Hello! This is a harmless Python file.')\n# Safe file example";
    const blob=new Blob([safeData],{type:'text/plain'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='safe_file.py';a.click();
  };

  downloadMal.onclick=()=>{
    const malData=`# Simulated ransomware script (for demo)
print("Encrypting your files...")
ransom_amount = "500 USD"
payment_method = "bitcoin"
print("Send", ransom_amount, "to our", payment_method, "wallet to decrypt your data.")
# WARNING: This is not real malware. Educational demo only.`;
    const blob=new Blob([malData],{type:'text/plain'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='ransomware_sample.py';a.click();
  };
})();
</script>
</body>
</html>
